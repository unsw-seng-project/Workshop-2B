(function(A){A.jQTouch=function(K){A.support.WebKitCSSMatrix=(typeof WebKitCSSMatrix=="object");
A.support.touch=(typeof Touch=="object");
A.support.WebKitAnimationEvent=(typeof WebKitTransitionEvent=="object");
var I,Q=A("head"),J=[],H=0,M={},b,V,D,B=RegExp(" Mobile/").test(navigator.userAgent),E=true,U=0,d=[],S={},c=A.jQTouch.prototype.extensions,e=["slide","flip","slideup","swap","cube","pop","dissolve","fade","back"],O=[],G="";
W(K);
function W(m){var l={addGlossToIcon:true,backSelector:".back, .cancel, .goback",cacheGetRequests:true,cubeSelector:".cube",dissolveSelector:".dissolve",fadeSelector:".fade",fixedViewport:true,flipSelector:".flip",formSelector:"form",fullScreen:true,fullScreenClass:"fullscreen",icon:null,touchSelector:"a, .touch",popSelector:".pop",preloadImages:false,slideSelector:"body > * > ul li a",slideupSelector:".slideup",startupScreen:null,statusBar:"default",submitSelector:".submit",swapSelector:".swap",useAnimations:true,useFastTouch:true};
M=A.extend({},l,m);
if(M.preloadImages){for(var k=M.preloadImages.length-1;
k>=0;
k--){(new Image()).src=M.preloadImages[k]
}}if(M.icon){var j=(M.addGlossToIcon)?"":"-precomposed";
G+='<link rel="apple-touch-icon'+j+'" href="'+M.icon+'" />'
}if(M.startupScreen){G+='<link rel="apple-touch-startup-image" href="'+M.startupScreen+'" />'
}if(M.fixedViewport){G+='<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"/>'
}if(M.fullScreen){G+='<meta name="apple-mobile-web-app-capable" content="yes" />';
if(M.statusBar){G+='<meta name="apple-mobile-web-app-status-bar-style" content="'+M.statusBar+'" />'
}}if(G){Q.append(G)
}A(document).ready(function(){for(var p in c){var q=c[p];
if(A.isFunction(q)){A.extend(S,q(S))
}}for(var p in e){var o=e[p];
var n=M[o+"Selector"];
if(typeof (n)=="string"){Y({name:o,selector:n})
}}d.push("input");
d.push(M.touchSelector);
d.push(M.backSelector);
d.push(M.submitSelector);
A(d.join(", ")).css("-webkit-touch-callout","none");
A(M.backSelector).tap(N);
A(M.submitSelector).tap(R);
I=A("body");
if(M.fullScreenClass&&window.navigator.standalone==true){I.addClass(M.fullScreenClass+" "+M.statusBar)
}I.bind("touchstart",g).bind("orientationchange",Z).trigger("orientationchange").submit(P);
if(M.useFastTouch&&A.support.touch){I.click(function(r){var i=A(r.target);
if(i.attr("target")=="_blank"||i.attr("rel")=="external"||i.is('input[type="checkbox"]')){return true
}else{return false
}});
I.mousedown(function(i){var r=(new Date()).getTime()-U;
if(r<200){return false
}})
}if(A("body > .current").length==0){V=A("body > *:first")
}else{V=A("body > .current:first");
A("body > .current").removeClass("current")
}A(V).addClass("current");
location.hash=A(V).attr("id");
T(V);
scrollTo(0,0);
a()
})
}function h(p){if(J.length>1){var o=Math.min(parseInt(p||1,10),J.length-1);
if(isNaN(o)&&typeof (p)==="string"&&p!="#"){for(var j=1,m=J.length;
j<m;
j++){if("#"+J[j].id===p){o=j;
break
}}}if(isNaN(o)||o<1){o=1
}var n=J[0].animation;
var l=J[0].page;
J.splice(0,o);
var k=J[0].page;
F(l,k,n,true);
return S
}else{console.error("No pages in history.");
return false
}}function f(m,k){var j=J[0].page;
if(typeof (m)==="string"){m=A(m)
}if(typeof (k)==="string"){for(var l=O.length-1;
l>=0;
l--){if(O[l].name===k){k=O[l];
break
}}}if(F(j,m,k)){T(m,k);
return S
}else{console.error("Could not animate pages.");
return false
}}function L(){return D
}function N(o){var l=A(o.target);
if(l.attr("nodeName")!=="A"){l=l.parent("a")
}var j=l.attr("target"),n=l.attr("hash"),m=null;
if(E==false||!l.length){console.warn("Not able to tap element.");
return false
}if(l.attr("target")=="_blank"||l.attr("rel")=="external"){return true
}for(var k=O.length-1;
k>=0;
k--){if(l.is(O[k].selector)){m=O[k];
break
}}if(j=="_webapp"){window.location=l.attr("href")
}else{if(l.is(M.backSelector)){h(n)
}else{if(n&&n!="#"){l.addClass("active");
f(A(n).data("referrer",l),m)
}else{l.addClass("loading active");
X(l.attr("href"),{animation:m,callback:function(){l.removeClass("loading");
setTimeout(A.fn.unselect,250,l)
},$referrer:l})
}}}return false
}function T(k,i){var j=k.attr("id");
J.unshift({page:k,animation:i,id:j})
}function F(i,m,l,k){if(m.length===0){A.fn.unselect();
console.error("Target element is missing.");
return false
}A(":focus").blur();
scrollTo(0,0);
var j=function(o){if(l){m.removeClass("in reverse "+l.name);
i.removeClass("current out reverse "+l.name)
}else{i.removeClass("current")
}m.trigger("pageAnimationEnd",{direction:"in"});
i.trigger("pageAnimationEnd",{direction:"out"});
clearInterval(dumbLoop);
V=m;
location.hash=V.attr("id");
a();
var n=m.data("referrer");
if(n){n.unselect()
}U=(new Date()).getTime();
E=true
};
i.trigger("pageAnimationStart",{direction:"out"});
m.trigger("pageAnimationStart",{direction:"in"});
if(A.support.WebKitAnimationEvent&&l&&M.useAnimations){m.one("webkitAnimationEnd",j);
E=false;
m.addClass(l.name+" in current "+(k?" reverse":""));
i.addClass(l.name+" out"+(k?" reverse":""))
}else{m.addClass("current");
j()
}return true
}function a(){dumbLoop=setInterval(function(){var i=V.attr("id");
if(location.hash==""){location.hash="#"+i
}else{if(location.hash!="#"+i){try{h(location.hash)
}catch(j){console.error("Unknown hash change.")
}}}},100)
}function C(i,k){var j=null;
A(i).each(function(n,m){var l=A(this);
if(!l.attr("id")){l.attr("id","page-"+(++H))
}l.appendTo(I);
if(l.hasClass("current")||!j){j=l
}});
if(j!==null){f(j,k);
return j
}else{return false
}}function X(k,l){var j={data:null,method:"GET",animation:null,callback:null,$referrer:null};
var i=A.extend({},j,l);
if(k!="#"){A.ajax({url:k,data:i.data,type:i.method,success:function(m,o){var n=C(m,i.animation);
if(n){if(i.method=="GET"&&M.cacheGetRequests&&i.$referrer){i.$referrer.attr("href","#"+n.attr("id"))
}if(i.callback){i.callback(true)
}}},error:function(m){if(i.$referrer){i.$referrer.unselect()
}if(i.callback){i.callback(false)
}}})
}else{if($referrer){$referrer.unselect()
}}}function P(k,j){var i=(typeof (k)==="string")?A(k):A(k.target);
if(i.length&&i.is(M.formSelector)&&i.attr("action")){X(i.attr("action"),{data:i.serialize(),method:i.attr("method")||"POST",animation:O[0]||null,callback:j});
return false
}return true
}function R(j){var i=A(this).closest("form");
if(i.length){evt=jQuery.Event("submit");
evt.preventDefault();
i.trigger(evt);
return false
}return true
}function Y(i){if(typeof (i.selector)=="string"&&typeof (i.name)=="string"){O.push(i);
A(i.selector).tap(N);
d.push(i.selector)
}}function Z(){D=window.innerWidth<window.innerHeight?"profile":"landscape";
I.removeClass("profile landscape").addClass(D).trigger("turn",{orientation:D})
}function g(r){var u=A(r.target);
if(!A(r.target).is(d.join(", "))){var o=A(r.target).closest("a");
if(o.length){u=o
}else{return 
}}if(event){var n=null,p=event.changedTouches[0].clientX,m=event.changedTouches[0].clientY,i=(new Date).getTime(),l=0,j=0,q=0;
u.bind("touchmove",k).bind("touchend",s);
n=setTimeout(function(){u.makeActive()
},100)
}function k(x){t();
var w=Math.abs(l);
var v=Math.abs(j);
if(w>v&&(w>35)&&q<1000){u.trigger("swipe",{direction:(l<0)?"left":"right"}).unbind("touchmove touchend")
}else{if(v>1){u.removeClass("active")
}}clearTimeout(n)
}function s(){t();
if(j===0&&l===0){u.makeActive();
u.trigger("tap")
}else{u.removeClass("active")
}u.unbind("touchmove touchend");
clearTimeout(n)
}function t(){var v=event.changedTouches[0]||null;
l=v.pageX-p;
j=v.pageY-m;
q=(new Date).getTime()-i
}}A.fn.unselect=function(i){if(i){i.removeClass("active")
}else{A(".active").removeClass("active")
}};
A.fn.makeActive=function(){return A(this).addClass("active")
};
A.fn.swipe=function(i){if(A.isFunction(i)){return this.each(function(j,k){A(k).bind("swipe",i)
})
}};
A.fn.tap=function(j){if(A.isFunction(j)){var i=(M.useFastTouch&&A.support.touch)?"tap":"click";
return A(this).live(i,j)
}else{A(this).trigger("tap")
}};
S={getOrientation:L,goBack:h,goTo:f,addAnimation:Y,submitForm:P};
return S
};
A.jQTouch.prototype.extensions=[];
A.jQTouch.addExtension=function(B){A.jQTouch.prototype.extensions.push(B)
}
})(jQuery);